server:
  port: 8080

spring:
  application:
    name: high-throughput-service
  
  # R2DBC Configuration (reactive)
  r2dbc:
    url: r2dbc:postgresql://localhost:5432/appdb
    username: app
    password: app_password_change_me
  
  # Flyway Configuration (blocking, for migrations only)
  datasource:
    url: jdbc:postgresql://localhost:5432/appdb
    username: app
    password: app_password_change_me
    driver-class-name: org.postgresql.Driver
  
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  endpoint:
    health:
      probes:
        enabled: true
  health:
    livenessState:
      enabled: true
    readinessState:
      enabled: true
  tracing:
    sampling:
      probability: 1.0

logging:
  level:
    root: INFO
    com.ngocnq2.highthroughput: DEBUG

resilience4j:
  circuitbreaker:
    instances:
      externalApi:
        slidingWindowSize: 50
        failureRateThreshold: 50
        waitDurationInOpenState: 10s
